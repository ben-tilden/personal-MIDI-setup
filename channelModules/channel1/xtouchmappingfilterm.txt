// xtouch mapping filter

@Onload
  channel = 0
@End

// sysex reception

@OnSysex
  ReceiveSysex sysexData

  // block all sysex except channel and init

  if sysexData[0] = 0x11 and sysexData[1] = 0x1C
    channel = 0
  elseif sysexData[0] <> 0x3F // will receive padMode as well
    Exit
  elseif sysexData[1] = 0x4B
    channel = sysexData[2]
    channelCC = channel + 176
    Exit
  endif

@End

@OnMIDICC
  SendMIDIThruOnCh channel
@End

@OnMIDINoteOn
  NoteValOffset = MIDINote + 19
  SendMIDIOut channelCC, 0x7C, NoteValOffset
@End

@OnMIDINoteOff
  NoteValOffset = MIDINote + 19
  SendMIDIOut channelCC, 0x7D, NoteValOffset
@End