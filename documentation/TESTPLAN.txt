# test plan
# regex for code:( +# TEST\n(.+\n)+? +# END TEST\n)|( +# TEST LIVE\n(.+\n)+? +# END TEST LIVE\n)

# TODO
ensure update of individual filter input messages

ensure that all buttons pressed actually function as expected
ensure that switching channel properly sends expected values back and forth from xtouch
ensure that hardware input filtering happening correctly

###
# filters
###

# ensure hardware messages only send to the correct modules

###
# x touch
###

# ensure xtouch lighting changes properly when channel changed
  # ensure setPhrase, arpPhraseToggle, arpPhraseToggleOnOff, latch, lfo, padMode, groupKnobPush lighting resets
  # ensure knob lighting resets
# ensure xtouch receives setPhrase
# ensure xtouch receives gateOpened # optional implementation not exercised yet

# ensure lights turn off on init

# ensure tempoModeMod changes accordingly and tempoPulse correlates

# ensure tempo lighting functions as expected

# ensure gateModeMod changes accordingly and gate correlates

# ensure arpValueModeMod changes accordingly or setPhrase changes

# ensure rest sent

# ensure arp and phrase are toggling and setPhrase is turned off (if on) when switched to arp

# ensure arp/phrase module is turned off or on

# ensure latch is toggling

# ensure waveguide is toggled properly
# ensure pitchQuantize is toggled properly
# ensure padMode is toggled properly

# ensure drumparams are assigned according to correct buttons

# ensure 'select' lighting sent to knobs
# ensure 'level' lighting sent to knobs
# ensure 'attack' lighting sent to knobs
# ensure 'release' lighting sent to knobs
# ensure 'pitch' lighting sent to knobs
# ensure 'modAmount' lighting sent to knobs
# ensure 'modRate' lighting sent to knobs
# ensure 'waveguide' lighting sent to knobs

# ensure correct drumParam sent on knob turn

# ensure tempoPulse aligns with tempoMode

# ensure gate aligns with gate
# ensure gateFactor is correct

# ensure velocity aligns with velocity

# ensure knobPush turned on accordingly

# ensure push control release handled correctly
  # ensure lighting matches with L array
  # ensure L array matches with previous value
  # ensure parameter associated with knob lighting also changed
  # tempoPulse, gate, velocity, drumParam1, drumParam2, drumParam3
  # ensure knobPush reset if no knob has been turned

# ensure that if knob is turned while knob is pressed, knob turn is set to true

# ensure that if a drum param button is pressed while drum param push control is occuring that nothing happens

# ensure setLfo is toggling
# ensure lfoVal is correctly set for any knob that's pressed, and that nothing is negatively impacted by it
# ensure lfoType changes accordingly
# ensure lfoNum changes accordingly

###
# launchkey mini
###

# ensure launchkey receives arpPhraseToggle
# ensure launchkey receives arpPhraseOnOffToggle
# ensure launchkey receives velocity
# ensure launchkey receives arpValueModeMod
# ensure launchkey receives setPhrase
# ensure launchkey receives isLatch

# ensure global array reset (with locals)
# ensure xtouch reset (with locals)
# ensure channel information reset

# ensure channel reset button properly resets the channel
# ensure channel change properly affects filters
  # ensure latch, etc. stay on for channel switched

# ensure J array contains correct key values pressed on reset (0)
# ensure K array contains correct order of keys pressed on reset (0)
# ensure numPressed aligns with number of keys pressed on reset (0)
# ensure numPressedTotal aligns with number of keys pressed total on reset (0)
# ensure phraseVal reset to 3C on reset

# ensure J array contains correct key values pressed on key press
# ensure K array contains correct order of keys pressed on key press
# ensure numPressed aligns with number of keys pressed on key press
# ensure numPressedTotal aligns with number of keys pressed total on key press
# ensure gateOpened aligns with number of keys pressed total on key press
# ensure phraseVal aligns with correct phraseVal on key press

# ensure J array contains correct key values pressed on key release
# ensure K array contains correct order of keys pressed on key release
# ensure numPressed aligns with number of keys pressed on key release
# ensure numPressedTotal aligns with number of keys pressed total on key release
# ensure gateOpened aligns with number of keys pressed total on key release
# ensure phraseVal aligns with correct phraseVal on key release

# ensure phrase is being correctly set
# ensure setPhrase is 0 if max limit reached, otherwise 1
# ensure tempPhraseVal is the previous value
# ensure phraseIndex is the previous index plus one

# ensure sysex resets phraseIndex when setPhrase is turned off

# ensure latchValues are storing correctly on note press
# ensure latchValues are reset if timing between notes is >=.1 second
# ensure latchValues are added to if timing between notes <.1 second

# ensure note releases are blocked if latch is on

# ensure transition between arp and phrase is smooth if module is on
# ensure note release properly sent when arp/phrase turned on
# ensure general transition with latch on to arp/phrase on is smooth
# ensure note press properly sent when arp/phrase turned off
# ensure general transition with latch on to arp/phrase off is smooth
# ensure note release properly sent when latch turned off

###
# channel #
###

# ensure channel receives numPressed
# ensure channel receives arpPhraseToggle
# ensure channel receives arpPhraseOnOffToggle
# ensure channel receives tempoPulse
# ensure channel receives gate
# ensure channel receives velocity
# ensure channel receives arpValueModeMod
# ensure channel receives phraseVal
# ensure channel receives phraseLengthPlusOffset
# ensure channel receives gateOpened
# ensure channel receives arpValues
# ensure channel receives phraseValues

# ensure maxValClockNum mod any possible tempoPulse is equal to 0 mod the same tempoPulse

# ensure gateOpened resets clockNum

# ensure notes are processed if clockNumMod is zero

# ensure arp only goes to arp

  # mode 0
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex

  # mode 1
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex
  # ensure isOctave is cycling through correctly

  # mode 2
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex
  # ensure isOctave is cycling through correctly

  # mode 3
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex

  # mode 4
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex
  # ensure isOctave is cycling through correctly

  # mode 5
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex
  # ensure isOctave is cycling through correctly

  # mode 6
  # ensure arpValueMode is correct
  # ensure random is random

  # mode 7
  # ensure arpValueMode is correct
  # ensure random is random

  # mode 8
  # ensure arpValueMode is correct
  # ensure random is random

  # mode 9
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex

  # mode A
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex
  # ensure isOctave is cycling through correctly

  # mode B
  # ensure arpValueMode is correct
  # ensure gateOpened resets arpIndex
  # ensure isOctave is cycling through correctly

# ensure phrase only goes to phrase

  # ensure gateOpened resets phraseIndex
  # ensure correct offset is sending 
  # ensure rest functionality is working
  # ensure phraseIndex is reset at the end of the phrase
